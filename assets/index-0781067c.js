(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();function R(e){const t=new Date().getTimezoneOffset()*6e4,o=new Date(Date.now()-t);return o.setMinutes(0),o.toISOString().slice(0,16)}const f={0:"Sunny",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Light snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},N={0:"Sunny.svg",1:"Partly cloudy.svg",2:"Partly cloudy.svg",3:"Overcast.svg",45:"Fog.svg",48:"Fog.svg",51:"Rainy light.svg",53:"Rainy light.svg",55:"Rainy light.svg",56:"Rainy snow.svg",57:"Rainy snow.svg",61:"Rainy.svg",63:"Rainy.svg",65:"Heavy rain.svg",66:"Rainy snow.svg",67:"Rainy snow.svg",71:"Weather snowy.svg",73:"Weather snowy.svg",75:"Weather snowy.svg",77:"Weather snowy.svg",80:"Rainy.svg",81:"Rainy.svg",82:"Rainy.svg",85:"Weather snowy.svg",86:"Weather snowy.svg",95:"Thunderstorm.svg",96:"Weather hail.svg",99:"Weather hail.svg"},oe='xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path style="fill:var(--primary-color)" d="M480-100q-133 0-226.5-91.709T160-415q0-63.142 24.5-120.771Q209-593.401 254-637.5L480-860l226 222.5q45 44.099 69.5 101.729Q800-478.142 800-415q0 131.582-93.5 223.291T480-100Zm-.235-60Q588-160 664-234.067q76-74.067 76-181.113Q740-466 720.5-512 701-558 666-593L480-776 294-593q-35 35-54.5 80.996-19.5 45.995-19.5 96.861Q220-308 295.765-234q75.764 74 184 74Z"/',re='xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path style="fill:var(--primary-color)" d="M480.118-330Q551-330 600.5-379.618q49.5-49.617 49.5-120.5Q650-571 600.382-620.5q-49.617-49.5-120.5-49.5Q409-670 359.5-620.382q-49.5 49.617-49.5 120.5Q310-429 359.618-379.5q49.617 49.5 120.5 49.5Zm-.353-58Q433-388 400.5-420.735q-32.5-32.736-32.5-79.5Q368-547 400.735-579.5q32.736-32.5 79.5-32.5Q527-612 559.5-579.265q32.5 32.736 32.5 79.5Q592-453 559.265-420.5q-32.736 32.5-79.5 32.5ZM480-200q-146 0-264-83T40-500q58-134 176-217t264-83q146 0 264 83t176 217q-58 134-176 217t-264 83Zm0-300Zm-.169 240Q601-260 702.5-325.5 804-391 857-500q-53-109-154.331-174.5-101.332-65.5-222.5-65.5Q359-740 257.5-674.5 156-609 102-500q54 109 155.331 174.5 101.332 65.5 222.5 65.5Z"/',se='xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path style="fill:var(--primary-color)" d="M743-631q-26 26-58 38.5T619-580q-34 0-66-12.5T495-631l-75-75q-17-17-37.5-25t-42.5-8q-22 0-42.5 8T260-706l-68 68-43-43 68-68q26-26 58-38.5t65-12.5q33 0 64.5 12.5T462-749l75 75q17 17 37.5 25.5T618-640q23 0 44-8.5t38-25.5l68-68 43 43-68 68Zm0 210q-26 26-58 38.5T619-370q-34 0-66-12.5T495-421l-75-75q-17-17-37.5-25t-42.5-8q-22 0-42.5 8T260-496l-68 68-43-42 68-69q26-26 58-38.5t65-12.5q33 0 64.5 12.5T462-539l75 75q17 17 38 25.5t44 8.5q23 0 43.5-8.5T700-464l68-68 43 43-68 68Zm-1 210q-26 26-57.5 38.5T619-160q-34 0-66-12.5T495-211l-76-75q-17-17-37.5-25t-42.5-8q-22 0-42.5 8T259-286l-68 68-42-42 68-69q26-26 57.5-38.5T339-380q33 0 65 12.5t58 38.5l75 75q17 17 38 25.5t44 8.5q23 0 43.5-8.5T700-254l68-68 42 43-68 68Z"/';function H(e,t,o){return`<div class="advanced-info__item">
        <svg ${e==="Humidity"?oe:e==="Visibility"?re:e==="Wind"?se:undefinded}></svg>
        <p class="advanced-info__value">${t} ${o}</p>
        <p class="advanced-info__name">${e}</p>
    </div>`}function ne(e,t,o){return`<div class="weekly-forecast__item">
            <p class="weekly-forecast__max-temp">${e}°</p>
            <img class="weekly-forecast__weathercode" src="/public/images/weathercodes/${t}" alt="" />
            <p class="weekly-forecast__date">${o}</p>
        </div>`}const ae=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=["January","February","March","April","May","June","July","August","September","October","November","December"];function ie(e){let t=e.slice(8),o=e.slice(5,7).replace(/^0+/,"");return`${t} ${P[o-1].slice(0,3)}`}function g(e){const t=Math.round(e);return t>0?`+${t}`:t<0?`-${t}`:void 0}const z=(e,t)=>{const o=document.querySelector(".today-forecast__present-temp"),a=e.hourly,r=e.hourly_units,s=a.time.indexOf(t),n=e.daily,c=Math.round(a.temperature_2m[s]),p=g(c);o.textContent=`${c}°`;const d=Math.round(a.apparent_temperature[s]),b=g(d),S=document.querySelector(".today-forecast__weathercode"),y=a.weathercode[s];S.textContent=f[y];const T=document.querySelector(".today-forecast__daily-summary");T.innerHTML="";const L=document.createElement("p");d>c?L.textContent=`Now it feels like ${b}°, actually ${p}°.`:d<c?L.textContent=`Now it seems that ${d}°, in fact ${p}°.`:d===c&&(L.textContent="Now it feels like you can trust temp value above."),T.append(L);const q=document.createElement("p");(f[y]==="Sunny"||f[y]==="Mainly clear")&&d>=20?q.textContent="It feels hot because of the direct sun. ":(f[y].includes("drizzle")||f[y].includes("rain"))&&(q.textContent=`It feels humiduty because of the ${f[y].toLowerCase()}. `);const Z=Math.round(n.temperature_2m_min[0]),V=Math.round(n.temperature_2m_max[0]),G=g(Z),j=g(V);q.innerHTML+=`
  <p>Today, the temperature is felt in the range from ${G}° to ${j}°<p/>`,T.append(q);const U=a.windspeed_10m[s],J=a.relativehumidity_2m[s],Y=a.visibility[s],C=document.querySelector(".advanced-info"),K=H("Wind",U,r.windspeed_10m),X=H("Humidity",J,r.relativehumidity_2m),ee=H("Visibility",Math.round(Y/1e3),"km");C.innerHTML="",C.innerHTML+=K,C.innerHTML+=X,C.innerHTML+=ee;const O=document.querySelector(".weekly-forecast");O.innerHTML="";for(let _=1;_<=6;_++){let te=ne(g(n.temperature_2m_max[_]),N[n.weathercode[_]],ie(n.time[_]));O.innerHTML+=te}};function ce(){const e=new Date;return`${ae[e.getDay()]}, ${e.getDate()} ${P[e.getMonth()]}`}function le(e,t){for(let o of e)o.addEventListener("change",()=>{o.checked?(t.push(o.value),console.log(t)):(t.splice(t.indexOf(o.value),1),console.log(t))})}const de="https://geocode.maps.co/search?q=",$=document.querySelector(".header"),l=document.querySelector(".header__searchbar-opener"),u=document.querySelector(".header__searchbar-closer"),v=document.querySelector("#city-name"),i=document.createElement("input");i.classList.add("header__searchbar-input");const m=document.createElement("div");m.classList.add("header__suggestions-container");function k(){l.removeEventListener("click",k),l.classList.remove("slide-rotate-hor-top"),v.classList.remove("slide-rotate-hor-top"),v.classList.add("slide-rotate-hor-bottom"),setTimeout(()=>v.style.display="none",500),l.classList.add("slide-rotate-hor-bottom"),setTimeout(()=>l.style.gridColumn="3",500),setTimeout(()=>l.classList.add("slide-rotate-hor-top"),600),setTimeout(()=>u.classList.toggle("hidden"),600),setTimeout(()=>u.style.gridRow="1",600),u.classList.add("slide-rotate-hor-top"),i.classList.remove("slide-rotate-hor-bottom"),setTimeout(()=>i.classList.add("scale-up-hor-center"),600),setTimeout(()=>$.appendChild(i),600),setTimeout(()=>i.style.gridRow="1",600),setTimeout(()=>i.style.gridColumn="2",600),setTimeout(()=>i.setAttribute("placeholder","Type your city"),600),$.appendChild(m)}function ue(){i.classList.remove("scale-up-hor-center"),i.classList.add("slide-rotate-hor-bottom"),setTimeout(()=>i.value="",600),setTimeout(()=>$.removeChild(i),600),u.classList.remove("slide-rotate-hor-top"),u.classList.add("slide-rotate-hor-bottom"),setTimeout(()=>u.classList.toggle("hidden"),600),setTimeout(()=>u.style.gridRow="3",600),l.classList.add("slide-rotate-hor-bottom"),l.classList.remove("slide-rotate-hor-top"),setTimeout(()=>l.style.gridColumn="1",500),setTimeout(()=>l.classList.add("slide-rotate-hor-top"),600),l.addEventListener("click",k),v.classList.remove("slide-rotate-hor-bottom"),v.classList.add("slide-rotate-hor-top"),setTimeout(()=>v.style.display="block",500),m.classList.add("slide-rotate-hor-bottom"),setTimeout(()=>m.innerHTML="",500),m.classList.remove("slide-rotate-hor-bottom"),$.removeChild(m)}l.addEventListener("click",k);u.addEventListener("click",ue);let D,x;async function me(){clearTimeout(D);const e=i.value;return new Promise((t,o)=>{D=setTimeout(async()=>{try{if(e.trim()===""){m.innerHTML="";return}const r=await(await fetch(`${de}${e}`)).json();m.innerHTML="",r.forEach(s=>{const n=document.createElement("div");n.classList.add("suggestion");const c=document.createElement("h3"),p=document.createElement("p");c.classList.add("suggestion__name"),p.classList.add("suggestion__discription");const d=s.display_name.split(",");c.textContent=d[0].trim(),p.textContent=d.slice(1).join(",").trim(),n.appendChild(c),n.appendChild(p),m.appendChild(n),n.setAttribute("data-value",r.indexOf(s)),n.addEventListener("click",()=>{const b=n.getAttribute("data-value");x=r[b];const S=x.lat,y=x.lon,T=c.textContent;u.click(),t([S,y,T])})})}catch(a){console.error("Error fetching suggestions:",a),o(a)}},500)})}const E=document.querySelector(".daily-forecast");function ye(e,t,o){return`
    <div class="daily-forecast__item">
      <img class="daily-forecast__weathercode" src="/public/images/weathercodes/${N[t]}" alt="" />
      <span class="daily-forecast__temperature">${g(o)}°</span>
      <span class="daily-forecast__time">${e.slice(11)}</span>
    </div>`}function W(e,t){const o=e.time,a=e.weathercode,r=e.temperature_2m,s=o.indexOf(t);E.innerHTML="";for(let n=s;n<=s+23;n++){const c=ye(o[n],a[n],r[n]);E.innerHTML+=c}}const he="https://geocode.maps.co/search?q=",B=["temperature_2m","weathercode","apparent_temperature","relativehumidity_2m","visibility","windspeed_10m"],pe=["temperature_2m_max","temperature_2m_min","weathercode"];let w,I;document.cookie?w=document.cookie.slice(5):w="Michurinsk";async function fe(){try{const e=await fetch(`${he}${w}`);if(!e.ok)throw new Error(`HTTP error: ${e.status}`);return await e.json()}catch(e){console.error(`Could not get products: ${e}`)}}const ge=fe();ge.then(e=>{for(let t of e)if(t.class==="boundary")return I=t,I}).then(e=>Q(e.lat,e.lon)).then(e=>{console.log(e);const t=R();z(e,t),W(e.hourly,t)});async function Q(e,t){try{const o=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&hourly=${B.join(",")}&daily=${pe.join(",")}&timezone=GMT`);if(!o.ok)throw new Error(`HTTP error: ${o.status}`);return await o.json()}catch(o){console.error(`Could not get products: ${o}`)}}const A=document.querySelector("#city-name"),ve=document.querySelector(".today-forecast__date");A.textContent=w;ve.textContent=ce();const we=document.querySelectorAll(".extra-propeties__item");le(we,B);i.addEventListener("input",async()=>{try{const[e,t,o]=await me(),a=await Q(e,t);w=o,document.cookie=`city=${o}`,A.textContent=w;const r=R(new Date);z(a,r),W(a.hourly,r)}catch(e){console.error("Error:",e)}});const Te="#42C6FF",_e="#FFE142",F="#FF64D4",M=document.querySelector(":root"),h=new Date;function Le(){0<=h.getHours()&&h.getHours()<6?M.style.setProperty("--primary-color",`${F}`):6<=h.getHours()&&h.getHours()<12?M.style.setProperty("--primary-color",`${Te}`):12<=h.getHours()&&h.getHours()<18?M.style.setProperty("--primary-color",`${_e}`):18<=h.getHours()&&h.getHours()<=23&&M.style.setProperty("--primary-color",`${F}`)}Le();
